<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Isometric Garden Scene</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        canvas {
            display: block;
            background: #2d2d34; /* Dark background to highlight tiles */
        }
    </style>
</head>
<body>
<script>
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    document.body.appendChild(canvas);

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const TILE_SIZE = 64; // Rendered tile size
    const TILE_SRC_SIZE = 32; // Original tile size in the sprite sheet
    const mapWidth = 7;
    const mapHeight = 7;

    const textures = {
        water: new Image(),
        grass: new Image(),
        dirt: new Image(),
        flowers: new Image(),
        rocks: new Image()
    };

    // Load tile textures from GitHub
    textures.water.src = 'https://raw.githubusercontent.com/MagnifiedBullet/GOECV/main/Assets/water.png';
    textures.grass.src = 'https://raw.githubusercontent.com/MagnifiedBullet/GOECV/main/Assets/grass.png';
    textures.dirt.src = 'https://raw.githubusercontent.com/MagnifiedBullet/GOECV/main/Assets/dirt.png';
    textures.flowers.src = 'https://raw.githubusercontent.com/MagnifiedBullet/GOECV/main/Assets/flowers.png';
    textures.rocks.src = 'https://raw.githubusercontent.com/MagnifiedBullet/GOECV/main/Assets/rocks.png';

    // Map layout
    const map = [
        ['water', 'water', 'water', 'water', 'water', 'water', 'water'],
        ['water', 'dirt',  'grass', 'grass', 'grass', 'dirt',  'water'],
        ['water', 'dirt',  'grass', 'flowers', 'grass', 'dirt',  'water'],
        ['water', 'dirt',  'grass', 'grass', 'rocks',  'dirt',  'water'],
        ['water', 'dirt',  'grass', 'grass', 'grass', 'dirt',  'water'],
        ['water', 'dirt',  'dirt',  'dirt',  'dirt',  'dirt',  'water'],
        ['water', 'water', 'water', 'water', 'water', 'water', 'water']
    ];

    function drawTile(x, y, texture) {
        const isoX = (x - y) * TILE_SIZE / 2 + canvas.width / 2;
        const isoY = (x + y) * TILE_SIZE / 4 + canvas.height / 4;

        ctx.drawImage(
            texture,
            0, 0, TILE_SRC_SIZE, TILE_SRC_SIZE, // Crop entire 32x32 tile
            isoX, isoY, // Placement on canvas
            TILE_SIZE, TILE_SIZE // Scaled size (64x64)
        );
    }

    function drawMap() {
        for (let y = 0; y < mapHeight; y++) {
            for (let x = 0; x < mapWidth; x++) {
                const tileType = map[y][x];
                const texture = textures[tileType];
                drawTile(x, y, texture);
            }
        }
    }

    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawMap();
        requestAnimationFrame(gameLoop);
    }

    // Wait for all textures to load before starting the game loop
    const promises = Object.values(textures).map(texture => new Promise(resolve => {
        texture.onload = resolve;
    }));

    Promise.all(promises).then(() => {
        gameLoop();
    });
</script>
</body>
</html>
