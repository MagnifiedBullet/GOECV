<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garden of Eeden</title>
    <style>
        body {
            background-color: #1e1e2c;
            margin: 0;
            overflow: hidden;
            font-family: 'Comic Sans MS', cursive, sans-serif; /* Whimsical font */
        }
        canvas {
            display: block;
            margin: auto;
            background: url('https://raw.githubusercontent.com/MagnifiedBullet/GOECV/main/Assets/Background.PNG') no-repeat center center;
            background-size: cover;
        }
        h1 {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3em;
            color: white;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
        }
        /* D-Pad Styling */
        .dpad {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 150px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-direction: column;
            opacity: 0.5; /* Semi-transparent */
        }
        .dpad-button {
            width: 50px;
            height: 50px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            border: none;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
        }
        .dpad-row {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>The Garden of Eeden</h1> <!-- Game title -->
    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <!-- D-Pad HTML Controls -->
    <div class="dpad">
        <div class="dpad-row">
            <button class="dpad-button" id="up">↑</button>
        </div>
        <div class="dpad-row">
            <button class="dpad-button" id="left">←</button>
            <button class="dpad-button" id="right">→</button>
        </div>
        <div class="dpad-row">
            <button class="dpad-button" id="down">↓</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Player sprite sheet
        const playerImage = new Image();
        playerImage.src = 'https://raw.githubusercontent.com/MagnifiedBullet/GOECV/main/Assets/Characters/Red.png';

        // Player properties
        const player = {
            x: canvas.width / 2 - 8, // Adjusted for smaller sprite width
            y: canvas.height / 2 - 15, // Adjusted for smaller sprite height
            width: 16,  // Adjusted sprite width
            height: 30, // Adjusted sprite height
            speed: 5,
            direction: 'down', // Default direction
            frameX: 0,
            frameY: 0,
            walkingCycle: 0 // To control the walking animation cycle
        };

        // Directions to frame mapping (column positions in the sprite sheet)
        const directions = {
            up: { col: 0 },    // North
            ne: { col: 1 },    // NorthEast
            right: { col: 2 }, // East
            se: { col: 3 },    // SouthEast
            down: { col: 4 },  // South
            sw: { col: 5 },    // SouthWest
            left: { col: 6 },  // West
            nw: { col: 7 }     // NorthWest
        };

        // Key press tracking
        const keys = {
            ArrowUp: false,
            ArrowDown: false,
            ArrowLeft: false,
            ArrowRight: false
        };

        // Event listeners for key presses (for mobile D-Pad)
        const buttons = {
            up: document.getElementById('up'),
            down: document.getElementById('down'),
            left: document.getElementById('left'),
            right: document.getElementById('right')
        };

        // D-Pad button events
        buttons.up.addEventListener('click', () => keys.ArrowUp = true);
        buttons.down.addEventListener('click', () => keys.ArrowDown = true);
        buttons.left.addEventListener('click', () => keys.ArrowLeft = true);
        buttons.right.addEventListener('click', () => keys.ArrowRight = true);

        // Stop moving when button is released
        document.addEventListener('mouseup', () => {
            keys.ArrowUp = false;
            keys.ArrowDown = false;
            keys.ArrowLeft = false;
            keys.ArrowRight = false;
        });

        // Game loop
        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Update player position and direction based on key presses
            if (keys.ArrowUp && keys.ArrowLeft) {
                player.x -= player.speed / Math.sqrt(2);
                player.y -= player.speed / Math.sqrt(2);
                player.direction = 'nw';
            } else if (keys.ArrowUp && keys.ArrowRight) {
                player.x += player.speed / Math.sqrt(2);
                player.y -= player.speed / Math.sqrt(2);
                player.direction = 'ne';
            } else if (keys.ArrowDown && keys.ArrowLeft) {
                player.x -= player.speed / Math.sqrt(2);
                player.y += player.speed / Math.sqrt(2);
                player.direction = 'sw';
            } else if (keys.ArrowDown && keys.ArrowRight) {
                player.x += player.speed / Math.sqrt(2);
                player.y += player.speed / Math.sqrt(2);
                player.direction = 'se';
            } else {
                if (keys.ArrowUp) {
                    player.y -= player.speed;
                    player.direction = 'up';
                }
                if (keys.ArrowDown) {
                    player.y += player.speed;
                    player.direction = 'down';
                }
                if (keys.ArrowLeft) {
                    player.x -= player.speed;
                    player.direction = 'left';
                }
                if (keys.ArrowRight) {
                    player.x += player.speed;
                    player.direction = 'right';
                }
            }

            // Prevent player from going out of bounds
            player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
            player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));

            // Update player sprite frame based on direction
            const direction = directions[player.direction];
            const row = player.walkingCycle % 2 === 0 ? 1 : 3; // Use walking frames from row 1 and row 3

            // Draw player sprite
            ctx.drawImage(
                playerImage,
                direction.col * player.width, // Source X (column-based)
                row * 32 + 1, // Source Y, adjusted slightly lower
                player.width, // Source Width (16px, smaller width)
                player.height, // Source Height (30px, adjusted height)
                player.x, // Destination X
                player.y, // Destination Y
                player.width, // Destination Width
                player.height // Destination Height
            );

            // Cycle walking frames for animation
            player.walkingCycle = (player.walkingCycle + 1) % 4;

            requestAnimationFrame(gameLoop);
        }

        // Start the game loop
        playerImage.onload = () => {
            gameLoop();
        };
    </script>
</body>
</html>
